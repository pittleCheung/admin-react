import{b3 as D,r as l,u as S,b2 as a,g as u,j as e,I as h,aS as n,S as A,bb as _,b4 as k}from"./index.0ce2eb6d.js";import{a as v,s as w,b as B}from"./adList.e138721f.js";import{d as T,D as R,l as j}from"./zh_CN.320f5cb2.js";import V from"./index.f02af379.js";import{R as d}from"./index.08278916.js";import{I as Y}from"./index.284c8006.js";import{S as M}from"./index.667d1cc1.js";import{T as P}from"./Table.8b57651f.js";import{I as q}from"./index.043d2106.js";const Q=()=>{const{id:o}=D(),[F,r]=l.exports.useState(!1),g=S(),[s]=a.useForm();l.exports.useState(),l.exports.useState(!1);const[c,m]=l.exports.useState(0),[y,f]=l.exports.useState([]);l.exports.useEffect(()=>{o&&v(o).then(t=>{s.setFieldsValue({...t,end_time:T(t.end_time)}),m(t.link_type)})},[o,s]);const b=t=>{const i=t.target.value;m(i)},p=()=>{g(-1)},I=async()=>{console.log(s.getFieldsValue());const t=s.getFieldsValue();console.log(t,"xxx"),await w({...t,enabled:t.enabled?1:0}),k.success("\u4FEE\u6539\u6210\u529F"),p()},x=async()=>{r(!0);const t=await B();f(t),console.log(t,"res")},E=[{title:"ID",dataIndex:"id",render:t=>e("a",{children:t})},{title:"\u5546\u54C1\u56FE\u7247",render:t=>e(q,{width:200,src:t.list_pic_url,style:{width:"50px",height:"50px"}})},{title:"\u5546\u54C1\u540D\u79F0",dataIndex:"name"},{title:"\u64CD\u4F5C",render:(t,i)=>e(n,{onClick:()=>C(i.id),children:"\u9009\u62E9"})}],C=t=>{s.setFieldsValue({goods_id:t}),r(!1)};return u("div",{children:[u(a,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",style:{maxWidth:600},form:s,preserve:!1,onFinish:I,children:[e(a.Item,{name:"id"}),e(a.Item,{label:"\u5E7F\u544A\u56FE\u7247",name:"image_url",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E00\u5F20\u56FE\u7247"}],children:e(V,{})}),e(a.Item,{label:"\u5546\u54C1\u7C7B\u578B",name:"link_type",children:u(d.Group,{onChange:b,children:[e(d,{value:0,children:" \u5546\u54C1id "}),e(d,{value:1,children:" \u94FE\u63A5 "})]})}),u("div",{style:{display:c===0?"block":"none"},children:[e(a.Item,{label:"\u5546\u54C1id",name:"goods_id",children:e(h,{})}),e(a.Item,{style:{marginLeft:"100px"},children:e(n,{type:"primary",style:{marginTop:"10px"},onClick:x,children:"\u6DFB\u52A0\u5173\u8054\u5546\u54C1"})})]}),e(a.Item,{label:"\u5E7F\u544A\u94FE\u63A5",name:"link",style:{display:c===1?"block":"none"},children:e(h,{})}),e(a.Item,{name:"end_time",label:"\u7ED3\u675F\u65F6\u95F4",rules:[{type:"object",required:!0,message:"\u8BF7\u9009\u62E9\u7ED3\u675F\u65F6\u95F4"}],children:e(R,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",locale:j})}),e(a.Item,{name:"sort_order",label:"\u6392\u5E8F",children:e(Y,{min:1,max:1e3,defaultValue:1})}),e(a.Item,{label:"\u5E7F\u544A\u542F\u7528",name:"enabled",children:e(M,{})}),e(a.Item,{children:u(A,{children:[e(n,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"}),e(n,{onClick:p,children:"\u53D6\u6D88"})]})})]}),e(_,{open:F,title:"Title",width:"60%",style:{height:"80vh"},footer:null,onCancel:()=>r(!1),children:e(P,{pagination:{pageSize:5},columns:E,dataSource:y,rowKey:t=>t.id})})]})};export{Q as default};
